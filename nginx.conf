worker_processes 1;

events { worker_connections 1024; }

http {

    sendfile on;

    upstream docker-nginx {
        server nginx:80;
    }

    upstream docker-apache {
        server apache:80;
    }

    server {
        listen 8080;

        location / {
            proxy_pass         http://docker-nginx;
            proxy_redirect     off;
            proxy_set_header   Host $host;
            proxy_set_header   X-Real-IP $remote_addr;
            proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header   X-Forwarded-Host $server_name;
        }

        location /api/ads/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/ads/;
        }

        location /api/announcements/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/announcements/;
        }

        location /api/applications/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-job-service.us-west-2.elasticbeanstalk.com/api/applications/;
        }

        location /api/authentication/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed.us-west-2.elasticbeanstalk.com/api/authentication/;
        }

        location /api/chat/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/chat/;
        }

        location /api/comments/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/comments/;
        }

        location /api/common/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/common/;
        }

        location /api/company/ {
            include /etc/nginx/conf.d/proxy.conf;

            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/company/;
        }


        location /api/customer/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/customer/;
        }

        location /api/employmenttypes/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-job-service.us-west-2.elasticbeanstalk.com/api/employmenttypes/;
        }

        location /api/experiencelevels/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-job-service.us-west-2.elasticbeanstalk.com/api/experiencelevels/;
        }


        location /api/feed/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/feed/;
        }

        location /api/filters/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-job-service.us-west-2.elasticbeanstalk.com/api/filters/;
        }

        location /api/hashtag/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/hashtag/;
        }

        location /api/institute/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/institute/;
        }

        location /api/jobs/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-job-service.us-west-2.elasticbeanstalk.com/api/jobs/;
        }

        location /api/news/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/news/;
        }

        location /api/page/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/page/;
        }

        location /api/group/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/group/;
        }

        location /api/reaction/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/reaction/;
        }

        location /api/report/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/report/;
        }

        location /api/search/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/search/;
        }

        location /api/services/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/services/;
        }

        location /api/suggestions/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/suggestions/;
        }


        location /api/surveys/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/surveys/;
        }


        location /api/user/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-feed-service.us-west-2.elasticbeanstalk.com/api/user/;
        }

        location /api/workflows/ {
            include /etc/nginx/conf.d/proxy.conf;
            proxy_pass http://accessed-job-service.us-west-2.elasticbeanstalk.com/api/workflows/;
        }
    }

    server {
        listen 8081;

        location / {
            proxy_pass         http://docker-apache;
            proxy_redirect     off;
            proxy_set_header   Host $host;
            proxy_set_header   X-Real-IP $remote_addr;
            proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header   X-Forwarded-Host $server_name;
        }
    }

}
